# Non-Functional Requirements (Security NFR)

| ID | Название | Описание | Метрика / Порог | Проверка (чем/где) | Компонент | Приоритет |
|----|-----------|-----------|-----------------|--------------------|-----------|-----------|
| NFR-1 | Защита API заголовками | HTTP-ответы должны содержать безопасные заголовки | Наличие `X-Content-Type-Options`, `X-Frame-Options`, `Referrer-Policy`, `CSP` | pytest / curl | Middleware | Высокий |
| NFR-2 | Ограничение размера запроса | Сервер отклоняет слишком большие тела запросов | 1 МБ → 413 | pytest | Middleware | Средний |
| NFR-3 | Лимит скорости запросов | Один IP не более 10 запросов/сек | ≤ 10 RPS | нагрузочный тест | Middleware | Средний |
| NFR-4 | CORS безопасность | Разрешены только доверенные домены | Только `localhost` в DEV | Config | Высокий |
| NFR-5 | Безопасное хранение секретов | Секреты берутся из .env, без хардкодов | 0 хардкодов | ревью / CI | Config | Высокий |
| NFR-6 | Время ответа API | 95% ответов быстрее 200 мс | p95 ≤ 200 ms | нагрузочный тест | Backend | Средний |
| NFR-7 | Обработка ошибок | Любая ошибка → JSON с error_code | 100% ошибок в JSON | pytest | Exception Handler | Высокий |
| NFR-8 | Анализ уязвимостей | Нет High/Critical CVE | 0 High/Crit | CI (pip-audit) | CI/CD | Средний |
